<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Side Word Typing Game ‚Äì 2nd Grade</title>
  <style>
    :root{ --bg:#f0f9ff; --surface:#ffffff; --ink:#0f172a; --muted:#475569; --brand:#2563eb; --accent:#22c55e; --danger:#ef4444; --line:#e2e8f0; }
    *{box-sizing:border-box}
    html,body{margin:0; padding:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--ink)}
    .container{width:min(1100px,94%);margin-inline:auto;padding:16px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    h1{font-size:clamp(22px,3.2vw,34px);margin:10px 0;color:var(--brand)}
    .controls{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    button, select, input[type="checkbox"]+label{font-size:18px}
    button{background:var(--brand);color:#fff;border:0;border-radius:14px;padding:10px 16px;cursor:pointer;box-shadow:0 8px 20px rgba(2,6,23,.08)}
    button.secondary{background:#111827}
    button.warn{background:var(--danger)}
    button:disabled{opacity:.5;cursor:not-allowed}
    select{padding:8px 10px;border-radius:12px;border:2px solid var(--line);background:#fff}
    .toggle{display:flex;align-items:center;gap:8px}
    #panel{display:grid;grid-template-columns:1fr auto;gap:14px;align-items:center;margin-top:6px}
    #stats{display:flex;gap:14px;align-items:center;justify-self:end}
    #stats .pill{background:#fff;border:2px solid var(--line);border-radius:999px;padding:6px 12px;font-weight:700}
    #lives{display:flex;gap:6px}
    .heart{font-size:26px;filter:drop-shadow(0 4px 10px rgba(239,68,68,.35))}
    .heart.lost{opacity:.25;filter:none}
    #gameArea{position:relative;width:100%;height:420px;border:3px solid var(--brand);border-radius:18px;background:linear-gradient(180deg,#e0f2fe,#ffffff);overflow:hidden;margin:14px 0;box-shadow:0 12px 30px rgba(2,6,23,.08)}
    .word{position:absolute;left:-180px;top:0;font-weight:800;color:#1f2937;background:#fff;border:2px solid var(--line);border-radius:999px;padding:6px 16px;box-shadow:0 8px 20px rgba(2,6,23,.08)}
    .word.small{font-size:20px}
    .word.medium{font-size:26px}
    .word.large{font-size:34px}
    @keyframes slideRight { from { transform:translateX(-200px); } to { transform:translateX(calc(100vw + 200px)); } }
    #typeRow{display:flex;gap:10px;align-items:center}
    #inputBox{flex:1;font-size:22px;padding:12px 14px;border-radius:14px;border:2px solid var(--brand);outline:none}
    #inputBox:focus{box-shadow:0 0 0 4px rgba(37,99,235,.2)}
    #helper{font-size:16px;color:var(--muted)}
    .toast{position:absolute;right:12px;top:12px;background:#111827;color:#fff;border-radius:12px;padding:8px 12px;opacity:0;transform:translateY(-8px);transition:all .25s ease}
    .toast.show{opacity:1;transform:translateY(0)}
    .footer{font-size:14px;color:var(--muted);margin-top:6px}
    .badge{background:#ecfeff;border:2px solid #bae6fd;border-radius:999px;padding:4px 10px;font-weight:700}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Side Word Typing Game ‚Äì 2nd Grade üéÆ</h1>
      <div class="controls">
        <span class="badge">Grade: 2nd Grade</span>
        <button id="startBtn">Start ‚ñ∂Ô∏é</button>
        <button id="pauseBtn" class="secondary" disabled>Pause ‚è∏</button>
        <button id="resetBtn" class="warn" disabled>Reset ‚Ü∫</button>
      </div>
    </header>

    <div id="panel">
      <div class="controls">
        <label>
          Text size:
          <select id="sizeSelect">
            <option value="large">Large</option>
            <option value="medium">Medium</option>
            <option value="small">Small</option>
          </select>
        </label>
        <div class="toggle">
          <input type="checkbox" id="ignoreCase" checked />
          <label for="ignoreCase">Ignore UPPER/lowercase</label>
        </div>
        <div class="toggle">
          <input type="checkbox" id="teacherMode" />
          <label for="teacherMode">Teacher mode (slow start)</label>
        </div>
      </div>
      <div id="stats">
        <div class="pill">Level: <span id="level">1</span></div>
        <div class="pill">Score: <span id="score">0</span></div>
        <div class="pill">Speed: <span id="speed">1.0x</span></div>
        <div id="lives" aria-label="lives" title="Lives"></div>
      </div>
    </div>

    <div id="gameArea" role="region" aria-label="Game area">
      <div id="toast" class="toast" aria-live="polite"></div>
    </div>

    <div id="typeRow">
      <input id="inputBox" type="text" placeholder="Type the word and press Enter" autocomplete="off" />
      <button id="submitBtn">Enter ‚èé</button>
      <div id="helper">Tip: Press Enter to submit</div>
    </div>

    <p class="footer">Words slide from the left ‚ûú Type them before they leave the screen. Gain points, level up, and keep your hearts! üíñ</p>
  </div>

  <script>
    // Locked grade value
    const FIXED_GRADE = "2";

    // Word lists
    const WORDS = {
      k: ["a","I","at","am","in","it","to","go","we","see","can","the","and","up","me","yes","no","red","blue","big","sun","cat","dog"],
      1: ["like","good","play","came","ride","here","into","this","that","help","make","jump","fun","book","tree","robot","mouse","happy"],
      2: ["because","before","around","please","school","friend","family","animal","winter","summer","garden","answer","letter","little","people"],
      3: ["information","computer","keyboard","sequence","algorithm","respect","language","picture","favorite","discuss","energy","machine","decimal","triangle"]
    };

    const state = { running:false, paused:false, level:1, score:0, lives:3, speed:1.0, spawnEvery:2200, activeWords:new Set(), timers:[], audioCtx:null };

    const ui = {
      gameArea: document.getElementById('gameArea'),
      startBtn: document.getElementById('startBtn'),
      pauseBtn: document.getElementById('pauseBtn'),
      resetBtn: document.getElementById('resetBtn'),
      sizeSelect: document.getElementById('sizeSelect'),
      ignoreCase: document.getElementById('ignoreCase'),
      teacherMode: document.getElementById('teacherMode'),
      level: document.getElementById('level'),
      score: document.getElementById('score'),
      lives: document.getElementById('lives'),
      speed: document.getElementById('speed'),
      input: document.getElementById('inputBox'),
      submit: document.getElementById('submitBtn'),
      toast: document.getElementById('toast')
    };

    // Sounds
    function beep(freq=660, dur=120, type='sine', vol=0.3){
      if(!state.audioCtx) state.audioCtx = new (window.AudioContext||window.webkitAudioContext)();
      const ctx = state.audioCtx; const o = ctx.createOscillator(); const g = ctx.createGain();
      o.type = type; o.frequency.value = freq; g.gain.value = vol; o.connect(g); g.connect(ctx.destination);
      o.start(); setTimeout(()=>{o.stop();}, dur);
    }
    const sCorrect=()=>{beep(740,100,'square',0.25); setTimeout(()=>beep(880,120,'square',0.22),90)};
    const sWrong=()=>{beep(220,160,'sawtooth',0.28)};
    const sLevel=()=>{beep(523,120,'triangle',0.22); setTimeout(()=>beep(659,140,'triangle',0.22),120); setTimeout(()=>beep(784,160,'triangle',0.22),260)};

    function randBetween(min,max){return Math.floor(Math.random()*(max-min+1))+min}
    function pickWord(){ const list = WORDS[FIXED_GRADE]; return list[randBetween(0, list.length-1)]; }
    function showToast(msg){ ui.toast.textContent = msg; ui.toast.classList.add('show'); setTimeout(()=>ui.toast.classList.remove('show'), 1200); }
    function updateLives(){ ui.lives.innerHTML = ''; for(let i=0;i<3;i++){ const span = document.createElement('span'); span.className = 'heart' + (i < state.lives ? '' : ' lost'); span.textContent = '‚ù§'; ui.lives.appendChild(span); } }
    function resetState(){ state.timers.forEach(t=>clearInterval(t)); state.timers=[]; state.activeWords.forEach(el=>el.remove()); state.activeWords.clear(); state.running=false; state.paused=false; state.level=1; state.score=0; state.lives=3; state.speed = ui.teacherMode.checked ? 0.8 : 1.0; state.spawnEvery = ui.teacherMode.checked ? 2700 : 2200; ui.level.textContent = state.level; ui.score.textContent = state.score; ui.speed.textContent = state.speed.toFixed(1)+'x'; updateLives(); ui.startBtn.disabled=false; ui.pauseBtn.disabled=true; ui.resetBtn.disabled=true; ui.input.value=''; }
    function loseLife(){ if(state.lives>0){ state.lives--; sWrong(); updateLives(); showToast('Miss! -1 ‚ù§'); } if(state.lives===0){ endGame(); } }
    function endGame(){ state.running=false; state.paused=false; state.timers.forEach(t=>clearInterval(t)); state.timers=[]; showToast('Game Over! Final score: '+state.score); ui.startBtn.disabled=false; ui.pauseBtn.disabled=true; ui.resetBtn.disabled=false; }
    function spawnWord(){ if(!state.running || state.paused) return; const el = document.createElement('div'); el.className = 'word ' + ui.sizeSelect.value; el.textContent = pickWord(); el.style.top = randBetween(20, 360) + 'px'; const baseDur = 6500; const dur = Math.max(2800, baseDur / state.speed); el.style.animation = `slideRight ${dur}ms linear forwards`; ui.gameArea.appendChild(el); state.activeWords.add(el); const timer = setTimeout(()=>{ if(state.activeWords.has(el)){ state.activeWords.delete(el); el.remove(); loseLife(); } }, dur); state.timers.push(timer); }
    function startSpawning(){ spawnWord(); const tick = setInterval(()=> spawnWord(), state.spawnEvery); state.timers.push(tick); }
    function addScore(n=1){ state.score += n; ui.score.textContent = state.score; const nextLevel = Math.floor(state.score/8) + 1; if(nextLevel>state.level){ state.level = nextLevel; ui.level.textContent = state.level; sLevel(); showToast('Level Up!'); state.speed = Math.min(2.6, state.speed + 0.2); state.spawnEvery = Math.max(900, state.spawnEvery - 120); ui.speed.textContent = state.speed.toFixed(1)+'x'; } }
    function tryMatch(){ if(!state.running || state.paused) return; const typedRaw = ui.input.value.trim(); if(!typedRaw) return; const typed = ui.ignoreCase.checked ? typedRaw.toLowerCase() : typedRaw; let matched = false; for(const el of Array.from(state.activeWords)){ const target = ui.ignoreCase.checked ? el.textContent.toLowerCase() : el.textContent; if(target === typed){ matched = true; state.activeWords.delete(el); el.remove(); sCorrect(); addScore(1); break; } } if(!matched){ sWrong(); showToast('Not a match'); } ui.input.value=''; }
    ui.submit.addEventListener('click', tryMatch);
    ui.input.addEventListener('keydown', (e)=>{ if(e.key==='Enter') tryMatch(); });
    ui.startBtn.addEventListener('click', ()=>{ if(state.running) return; state.running=true; state.paused=false; ui.startBtn.disabled=true; ui.pauseBtn.disabled=false; ui.resetBtn.disabled=false; ui.input.focus(); startSpawning(); });
    ui.pauseBtn.addEventListener('click', ()=>{ if(!state.running) return; state.paused = !state.paused; ui.pauseBtn.textContent = state.paused ? 'Resume ‚ñ∂Ô∏é' : 'Pause ‚è∏'; showToast(state.paused ? 'Paused' : 'Resumed'); });
    ui.resetBtn.addEventListener('click', ()=>{ resetState(); showToast('Reset'); });
    ui.sizeSelect.addEventListener('change', ()=> showToast('Text size: '+ui.sizeSelect.value));
    resetState();
  </script>
</body>
</html>